<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8">
  <title>Мини-менеджер меток</title>
  <style>
    body { font-family: sans-serif; padding:20px; max-width:600px; margin:auto }
    input, button { font-size:16px; padding:8px; margin:4px 0; width:100%; box-sizing:border-box }
    ul { list-style:none; padding:0 }
    li { padding:8px 0; border-bottom:1px solid #ddd }
    a { color: blue; text-decoration: underline; cursor: pointer; }
  </style>
</head>
<body>

<h2>Менеджер меток</h2>

<input id="url" placeholder="Ссылка на видео (VK, YouTube или .mp4)" />
<button id="load">Загрузить и поставить метку</button>

<ul id="notes"></ul>

<script>
  const notes = [];

  document.getElementById('load').onclick = () => {
    const src = document.getElementById('url').value.trim();
    if (!src) return alert('Введите ссылку');
    const time = prompt('Время в секундах (например 300 = 5 мин):', '0');
    if (time === null) return;
    const sec = parseInt(time,10);
    if (isNaN(sec)) return alert('Неправильное время');
    notes.push({ src, sec });
    render();
  };

  function render() {
    const ul = document.getElementById('notes');
    ul.innerHTML = '';
    notes.forEach((n,i) => {
      // определяем внешний линк
      let link = n.src;
      const yt = link.match(/youtu\.be\/(.{11})/) || link.match(/youtube\.com\/watch\?v\=(.{11})/);
      if (yt) {
        link = `https://www.youtube.com/watch?v=${yt[1]}&t=${n.sec}s`;
      }
      const li = document.createElement('li');
      li.innerHTML = `#${i+1} — <a href="${link}" target="_blank">Перейти на ${n.sec}s</a>`;
      ul.appendChild(li);
    });
  }
</script>

</body>
</html>
